/////////////////////////////////////
// DO NOT EDIT THIS FILE DIRECTLY,
// THIS FILE WAS AUTO GENERATED.
/////////////////////////////////////

import { ObjectType, Field, ID } from "@nestjs/graphql";

import { Permission as PrismaPermission } from "../client";

import { BaseRolePermission } from "./RolePermission.model";
import { BaseUserPermission } from "./UserPermission.model";

export type PermissionConstructor = {
  id?: number | null;
  name: string;
  rolePermissions?: BaseRolePermission[] | null;
  userPermissions?: BaseUserPermission[] | null;
};

@ObjectType({ isAbstract: true })
export class BasePermission implements PrismaPermission {
  @Field(() => ID, { nullable: false })
  readonly id: number;

  @Field(() => String!, { nullable: false })
  name: string;

  @Field(() => [BaseRolePermission], { nullable: true })
  rolePermissions: null | BaseRolePermission[];

  @Field(() => [BaseUserPermission], { nullable: true })
  userPermissions: null | BaseUserPermission[];

  constructor(model: PermissionConstructor) {
    this.id = model.id!;
    this.name = model.name;
    this.rolePermissions = model.rolePermissions ?? null;
    this.userPermissions = model.userPermissions ?? null;
  }

  static fromHash(hash: PrismaPermission): BasePermission {
    return new BasePermission(hash);
  }

  toHash(): PrismaPermission {
    const { rolePermissions, userPermissions, ...entity } = this;
    return entity;
  }
}
